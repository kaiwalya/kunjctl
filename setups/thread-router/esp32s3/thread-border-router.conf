# Thread Router for ESP Thread Border Router Board (S3 side)
# S3 runs OpenThread host stack, communicating with H2 RCP via UART

CONFIG_IDF_TARGET="esp32s3"

# Flash size (S3 on border router board has 8MB)
CONFIG_ESPTOOLPY_FLASHSIZE_8MB=y

# Console via USB (keep UART free for RCP communication)
CONFIG_ESP_CONSOLE_USB_SERIAL_JTAG=y

# FTD (Full Thread Device) - can be router/leader
CONFIG_OPENTHREAD_FTD=y

# Use UART to talk to RCP (H2 handles the radio)
CONFIG_OPENTHREAD_RADIO_SPINEL_UART=y

# Stack sizes (UART RCP mode needs more stack)
CONFIG_OPENTHREAD_TASK_SIZE=8192
CONFIG_ESP_MAIN_TASK_STACK_SIZE=6144

# Disable OpenThread console (avoid any UART interference)
CONFIG_OPENTHREAD_CONSOLE_ENABLE=n
CONFIG_OPENTHREAD_CLI=n

# Disable features not needed
CONFIG_OPENTHREAD_SRP_CLIENT=n
CONFIG_OPENTHREAD_DNS_CLIENT=n

# Logging
CONFIG_OPENTHREAD_LOG_LEVEL_DYNAMIC=n
CONFIG_OPENTHREAD_LOG_LEVEL_NOTE=y

# UART settings - no hardware flow control (matching karna)
CONFIG_UART_ISR_IN_IRAM=y

# mbedTLS for Thread security
CONFIG_MBEDTLS_CMAC_C=y
CONFIG_MBEDTLS_SSL_PROTO_DTLS=y
CONFIG_MBEDTLS_KEY_EXCHANGE_ECJPAKE=y
CONFIG_MBEDTLS_ECJPAKE_C=y
